import{p as e,a as x,w as U,A as B,x as L,v as $}from"./chunk-EPOLDU6W-BbN4KRE8.js";import{u as P}from"./puter-CxLeiHHH.js";import{c as m}from"./utils-D9lRg291.js";const T=({score:s=75})=>{const t=l=>l>70?"#22c55e":l>49?"#eab308":"#ef4444",r=l=>l>70?"gauge-grad-good":l>49?"gauge-grad-warning":"gauge-grad-bad",n=t(s),c=r(s),i=80,o=2*Math.PI*i,d=s/100,a=o*(1-d);return e.jsxs("div",{className:"relative w-[180px] h-[180px]",children:[e.jsxs("svg",{width:"180",height:"180",viewBox:"0 0 180 180",className:"transform -rotate-90",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:c,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:n,stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:n})]})}),e.jsx("circle",{cx:"90",cy:"90",r:i,stroke:"#e5e7eb",strokeWidth:"12",fill:"none"}),e.jsx("circle",{cx:"90",cy:"90",r:i,stroke:`url(#${c})`,strokeWidth:"12",fill:"none",strokeLinecap:"round",strokeDasharray:o,strokeDashoffset:a,className:"transition-all duration-1000 ease-out"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-5xl font-bold",style:{color:n},children:s}),e.jsx("span",{className:"text-gray-500 text-sm",children:"/100"})]})]})},E=({score:s})=>e.jsxs("div",{className:m("flex flex-row gap-1 items-center px-2 py-0.5 rounded-[96px]",s>69?"bg-badge-green":s>39?"bg-badge-yellow":"bg-badge-red"),children:[e.jsx("img",{src:s>69?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4"}),e.jsxs("p",{className:m("text-sm font-medium",s>69?"text-badge-green-text":s>39?"text-badge-yellow-text":"text-badge-red-text"),children:[s,"/100"]})]}),u=({title:s,score:t})=>{const r=t>70?"text-green-600":t>49?"text-yellow-600":"text-red-600";return e.jsx("div",{className:"resume-summary",children:e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center",children:[e.jsx("p",{className:"text-2xl",children:s}),e.jsx(E,{score:t})]}),e.jsxs("p",{className:"text-2xl",children:[e.jsx("span",{className:r,children:t}),"/100"]})]})})},z=({feedback:s})=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-md w-full",children:[e.jsxs("div",{className:"flex flex-row items-center p-4 gap-8",children:[e.jsx(T,{score:s.overallScore}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Resume Score"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This score is calculated based on the variables listed below."})]})]}),e.jsx(u,{title:"Tone & Style",score:s.toneAndStyle.score}),e.jsx(u,{title:"Content",score:s.content.score}),e.jsx(u,{title:"Structure",score:s.structure.score}),e.jsx(u,{title:"Skills",score:s.skills.score})]}),D=({score:s,suggestions:t})=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-md w-full p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"ATS Compatibility"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"text-4xl font-bold",children:[s,"%"]}),e.jsx("div",{className:m("px-3 py-1 rounded-full text-sm font-medium",s>70?"bg-green-100 text-green-700":s>50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:s>70?"Good":s>50?"Needs Improvement":"Poor"})]}),e.jsx("div",{className:"space-y-2",children:t&&t.map((r,n)=>e.jsxs("div",{className:m("flex items-start gap-2 p-3 rounded-lg",r.type==="good"?"bg-green-50":"bg-yellow-50"),children:[e.jsx("img",{src:r.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:r.type,className:"w-5 h-5 mt-0.5"}),e.jsx("p",{className:"text-sm",children:r.tip})]},n))})]}),I=x.createContext(void 0),C=()=>{const s=x.useContext(I);if(!s)throw new Error("Accordion components must be used within an Accordion");return s},G=({children:s,defaultOpen:t,allowMultiple:r=!1,className:n=""})=>{const[c,i]=x.useState(t?[t]:[]),o=a=>{i(l=>r?l.includes(a)?l.filter(N=>N!==a):[...l,a]:l.includes(a)?[]:[a])},d=a=>c.includes(a);return e.jsx(I.Provider,{value:{activeItems:c,toggleItem:o,isItemActive:d},children:e.jsx("div",{className:`space-y-2 ${n}`,children:s})})},h=({id:s,children:t,className:r=""})=>e.jsx("div",{className:`overflow-hidden border-b border-gray-200 ${r}`,children:t}),j=({itemId:s,children:t,className:r="",icon:n,iconPosition:c="right"})=>{const{toggleItem:i,isItemActive:o}=C(),d=o(s),a=e.jsx("svg",{className:m("w-5 h-5 transition-transform duration-200",{"rotate-180":d}),fill:"none",stroke:"#98A2B3",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),l=()=>{i(s)};return e.jsxs("button",{onClick:l,className:`
        w-full px-4 py-3 text-left
        focus:outline-none
        transition-colors duration-200 flex items-center justify-between cursor-pointer
        ${r}
      `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[c==="left"&&(n||a),e.jsx("div",{className:"flex-1",children:t})]}),c==="right"&&(n||a)]})},f=({itemId:s,children:t,className:r=""})=>{const{isItemActive:n}=C(),c=n(s);return e.jsx("div",{className:`
        overflow-hidden transition-all duration-300 ease-in-out
        ${c?"max-h-fit opacity-100":"max-h-0 opacity-0"}
        ${r}
      `,children:e.jsx("div",{className:"px-4 py-3 ",children:t})})},H=({score:s})=>e.jsxs("div",{className:m("flex flex-row gap-1 items-center px-2 py-0.5 rounded-[96px]",s>69?"bg-badge-green":s>39?"bg-badge-yellow":"bg-badge-red"),children:[e.jsx("img",{src:s>69?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4"}),e.jsxs("p",{className:m("text-sm font-medium",s>69?"text-badge-green-text":s>39?"text-badge-yellow-text":"text-badge-red-text"),children:[s,"/100"]})]}),p=({title:s,categoryScore:t})=>e.jsxs("div",{className:"flex flex-row gap-4 items-center py-2",children:[e.jsx("p",{className:"text-2xl font-semibold",children:s}),e.jsx(H,{score:t})]}),v=({tips:s})=>e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full",children:[e.jsx("div",{className:"bg-gray-50 w-full rounded-lg px-5 py-4 grid grid-cols-2 gap-4",children:s.map((t,r)=>e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-5"}),e.jsx("p",{className:"text-xl text-gray-500 ",children:t.tip})]},r))}),e.jsx("div",{className:"flex flex-col gap-4 w-full",children:s.map((t,r)=>e.jsxs("div",{className:m("flex flex-col gap-2 rounded-2xl p-4",t.type==="good"?"bg-green-50 border border-green-200 text-green-700":"bg-yellow-50 border border-yellow-200 text-yellow-700"),children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-5"}),e.jsx("p",{className:"text-xl font-semibold",children:t.tip})]}),e.jsx("p",{children:t.explanation})]},r+t.tip))})]}),O=({feedback:s})=>e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(G,{children:[e.jsxs(h,{id:"tone-style",children:[e.jsx(j,{itemId:"tone-style",children:e.jsx(p,{title:"Tone & Style",categoryScore:s.toneAndStyle.score})}),e.jsx(f,{itemId:"tone-style",children:e.jsx(v,{tips:s.toneAndStyle.tips})})]}),e.jsxs(h,{id:"content",children:[e.jsx(j,{itemId:"content",children:e.jsx(p,{title:"Content",categoryScore:s.content.score})}),e.jsx(f,{itemId:"content",children:e.jsx(v,{tips:s.content.tips})})]}),e.jsxs(h,{id:"structure",children:[e.jsx(j,{itemId:"structure",children:e.jsx(p,{title:"Structure",categoryScore:s.structure.score})}),e.jsx(f,{itemId:"structure",children:e.jsx(v,{tips:s.structure.tips})})]}),e.jsxs(h,{id:"skills",children:[e.jsx(j,{itemId:"skills",children:e.jsx(p,{title:"Skills",categoryScore:s.skills.score})}),e.jsx(f,{itemId:"skills",children:e.jsx(v,{tips:s.skills.tips})})]})]})}),Y=()=>[{title:"ElevateCV | Review "},{name:"description",content:"Detailed overview of your resume"}],W=()=>{const{auth:s,isLoading:t,fs:r,kv:n}=P(),{id:c}=B(),[i,o]=x.useState(""),[d,a]=x.useState(""),[l,N]=x.useState(null),b=L();return x.useEffect(()=>{!t&&!s.isAuthenticated&&b(`/auth?next=/resume/${c}`)},[t,s.isAuthenticated,b,c]),x.useEffect(()=>{(async()=>{const w=await n.get(`resume:${c}`);if(!w)return;const g=JSON.parse(w),y=await r.read(g.resumePath);if(!y)return;const R=new Blob([y],{type:"application/pdf"}),k=URL.createObjectURL(R);a(k);const S=await r.read(g.imagePath);if(!S)return;const A=URL.createObjectURL(S);o(A),N(g.feedback),console.log({resumeUrl:k,imageUrl:A,feedback:g.feedback})})()},[c,r,n]),e.jsxs("main",{className:"!pt-0",children:[e.jsx("nav",{className:"resume-nav",children:e.jsxs($,{to:"/",className:"back-button",children:[e.jsx("img",{src:"/icons/back.svg",alt:"logo",className:"w-2.5 h-2.5"}),e.jsx("span",{className:"text-gray-800 text-sm font-semibold",children:"Back to Homepage"})]})}),e.jsxs("div",{className:"flex flex-row w-full max-lg:flex-col-reverse",children:[e.jsx("section",{className:"feedback-section bg-[url('/images/bg-small.svg') bg-cover h-[100vh] sticky top-0 items-center justify-center",children:i&&d&&e.jsx("div",{className:"animate-in fade-in duration-1000 gradient-border max-sm:m-0 h-[90%] max-wxl:h-fit w-fit",children:e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:i,className:"w-full h-full object-contain rounded-2xl",title:"resume"})})})}),e.jsxs("section",{className:"feedback-section",children:[e.jsx("h2",{className:"text-4xl !text-black font-bold",children:"Resume Review"}),l?e.jsxs("div",{className:"flex flex-col gap-8 animate-in fade-in duration-1000",children:[e.jsx(z,{feedback:l}),e.jsx(D,{score:l.ATS.score||0,suggestions:l.ATS.tips||[]}),e.jsx(O,{feedback:l})]}):e.jsx("img",{src:"/images/resume-scan-2.gif",className:"w-full"})]})]})]})},_=U(W);export{_ as default,Y as meta};
